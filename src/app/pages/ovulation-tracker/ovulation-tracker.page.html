<ion-header>
  <ion-toolbar>
    <!-- Header with Date/Time -->
    <ion-buttons slot="start">
      <div class="location-time">
        <ion-text color="light">
          <h4>{{ currentDate }}</h4>
          <p>{{ currentTime }}</p>
        </ion-text>
      </div>
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-avatar (click)="openSettings()" class="avatar">
        <img src="assets/images/default-avatar.png" alt="User Avatar">
      </ion-avatar>
      <ion-button fill="clear" (click)="dismiss()" class="strawberry-button">
        <img src="assets/icon/strawberryBtn01.svg" alt="Close Tracker" class="strawberry-icon" />
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Background (optional) -->
  <div class="cycle-background" [class.fertile]="currentPhase === 'Fertile'" 
                              [class.ovulation]="currentPhase === 'Ovulation'" 
                              [class.luteal]="currentPhase === 'Luteal'" 
                              [class.menstrual]="currentPhase === 'Menstrual'">
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Cycle Phase Display -->
    <div class="phase-display">
      <ion-text color="light">
        <h1>{{ currentPhase }}</h1>
        <p *ngIf="daysUntilNextEvent > 0">{{ daysUntilNextEvent }} days until {{ nextEvent }}</p>
        <p *ngIf="daysUntilNextEvent <= 0">{{ nextEvent }} is today</p>
      </ion-text>
    </div>

    <!-- Cycle Visualization -->
    <div class="cycle-visualization">
      <div class="cycle-progress" [style.width.%]="cycleProgress"></div>
    </div>
  </div>

  <!-- Bottom Panel -->
  <div class="cycle-panel" (click)="openDetailedCycle()">
    <ion-text class="panel-title text-dark">Cycle Details</ion-text>
    <div class="cycle-details">
      <div class="detail-item">
        <ion-icon name="calendar"></ion-icon>
        <span>Day {{ cycleDay }} of {{ cycleData?.cycleLength || 28 }}</span>
      </div>
      <div class="detail-item">
        <ion-icon name="repeat"></ion-icon>
        <span>Next period: {{ nextPeriodDate | date }}</span>
      </div>
    </div>
  </div>
</ion-content>